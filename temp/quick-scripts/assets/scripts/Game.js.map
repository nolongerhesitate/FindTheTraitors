{"version":3,"sources":["Game.js"],"names":["cc","Class","extends","Component","properties","friendPrefab","default","type","Prefab","traitorsPrefab","playArea","Node","traitorsLocX","traitorsLocY","onLoad","initActors","setInputControl","start","update","dt","traitorsPos","Math","round","random0To1","i","actor","instantiate","anchorX","anchorY","addChild","actorPos","p","parseInt","setPosition","x","y","self","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","onTouchBegan","touch","touchLoc","getLocation","onTouchEnded","console","log","node"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAc;AACVC,qBAAS,IADC;AAEVC,kBAAMP,GAAGQ;AAFC,SADN;AAKRC,wBAAgB;AACZH,qBAAS,IADG;AAEZC,kBAAMP,GAAGQ;AAFG,SALR;AASR;AACAE,kBAAU;AACNJ,qBAAS,IADH;AAENC,kBAAMP,GAAGW;AAFH,SAVF;AAcR;AACAC,sBAAc,CAfN;AAgBRC,sBAAc;AAhBN,KAHP;;AAsBL;;AAEAC,UAxBK,oBAwBI;AACL;AACA,aAAKC,UAAL;AACA;AACA,aAAKC,eAAL;AACH,KA7BI;AA+BLC,SA/BK,mBA+BG,CACP,CAhCI;AAkCLC,UAlCK,kBAkCEC,EAlCF,EAkCM,CAEV,CApCI;;;AAsCLJ,gBAAY,sBAAY;AACpB;AACA,YAAIK,cAAcC,KAAKC,KAAL,CAAWtB,GAAGuB,UAAH,KAAkB,EAA7B,CAAlB;;AAEA;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;AACzB,gBAAIC,QAAQ,IAAZ;AACA,gBAAID,KAAKJ,WAAT,EAAsB;AAClB;AACAK,wBAAQzB,GAAG0B,WAAH,CAAe,KAAKjB,cAApB,CAAR;AACH,aAHD,MAGO;AACH;AACAgB,wBAAQzB,GAAG0B,WAAH,CAAe,KAAKrB,YAApB,CAAR;AACH;AACDoB,kBAAME,OAAN,GAAgB,CAAhB;AACAF,kBAAMG,OAAN,GAAgB,CAAhB;AACA,iBAAKlB,QAAL,CAAcmB,QAAd,CAAuBJ,KAAvB;AACA,gBAAIK,WAAW9B,GAAG+B,CAAH,CAAK,OAAOP,IAAI,CAAX,CAAL,EAAoB,MAAMQ,SAASR,IAAI,CAAb,CAA1B,CAAf;AACAC,kBAAMQ,WAAN,CAAkBH,QAAlB;AACA,gBAAIN,KAAKJ,WAAT,EAAsB;AAClB,qBAAKR,YAAL,GAAoBkB,SAASI,CAA7B;AACA,qBAAKrB,YAAL,GAAoBiB,SAASK,CAA7B;AACH;AACJ;AACJ,KA9DI;;AAgELnB,qBAAiB,2BAAY;AACzB,YAAIoB,OAAO,IAAX;AACApC,WAAGqC,YAAH,CAAgBC,WAAhB,CAA4B;AACxBC,mBAAOvC,GAAGwC,aAAH,CAAiBC,gBADA;AAExBC,0BAAc,sBAAUC,KAAV,EAAiBJ,KAAjB,EAAwB;AAClC,oBAAIK,WAAWD,MAAME,WAAN,EAAf;;AAEA,uBAAO,IAAP,CAHkC,CAGrB;AAChB,aANuB;;AAQxBC,0BAAc,sBAAUH,KAAV,EAAiBJ,KAAjB,EAAwB;AAClC,oBAAIK,WAAWD,MAAME,WAAN,EAAf;AACAE,wBAAQC,GAAR,CAAY,UAAUZ,KAAKxB,YAAf,GAA8B,IAA9B,GAAqCwB,KAAKvB,YAA1C,GAAyD,QAAzD,GAAoE+B,SAASV,CAA7E,GAAiF,IAAjF,GAAwFU,SAAST,CAA7G;AACA,oBAAIS,SAASV,CAAT,GAAaE,KAAKxB,YAAlB,GAAiC,GAAjC,IAAwCgC,SAAST,CAAT,GAAaC,KAAKvB,YAAlB,GAAiC,GAA7E,EAAkF;AAC9EkC,4BAAQC,GAAR,CAAY,SAAZ;AACH;AACJ;AAduB,SAA5B,EAeGZ,KAAKa,IAfR;AAgBH;AAlFI,CAAT","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        friendPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        traitorsPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        //游戏区域\r\n        playArea: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 叛徒世界坐标\r\n        traitorsLocX: 0,\r\n        traitorsLocY: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        // 演员就位\r\n        this.initActors();\r\n        //初始化输入监听\r\n        this.setInputControl();\r\n    },\r\n\r\n    start() {\r\n    },\r\n\r\n    update(dt) {\r\n\r\n    },\r\n\r\n    initActors: function () {\r\n        // 叛徒生成位置\r\n        var traitorsPos = Math.round(cc.random0To1() * 63)\r\n\r\n        // 生成色塊\r\n        for (var i = 0; i < 63; i++) {\r\n            var actor = null;\r\n            if (i == traitorsPos) {\r\n                //生成叛徒\r\n                actor = cc.instantiate(this.traitorsPrefab);\r\n            } else {\r\n                //生成朋友\r\n                actor = cc.instantiate(this.friendPrefab);\r\n            }\r\n            actor.anchorX = 0;\r\n            actor.anchorY = 0;\r\n            this.playArea.addChild(actor);\r\n            var actorPos = cc.p(100 * (i % 7), 100 * parseInt(i / 7));\r\n            actor.setPosition(actorPos);\r\n            if (i == traitorsPos) {\r\n                this.traitorsLocX = actorPos.x;\r\n                this.traitorsLocY = actorPos.y;\r\n            }\r\n        }\r\n    },\r\n\r\n    setInputControl: function () {\r\n        var self = this\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\r\n            onTouchBegan: function (touch, event) {\r\n                var touchLoc = touch.getLocation();\r\n\r\n                return true; //????????????????????????? why return true???\r\n            },\r\n\r\n            onTouchEnded: function (touch, event) {\r\n                var touchLoc = touch.getLocation();\r\n                console.log(\"叛徒坐标：\" + self.traitorsLocX + \"--\" + self.traitorsLocY + \"; 点击坐标\" + touchLoc.x + \"--\" + touchLoc.y);\r\n                if (touchLoc.x - self.traitorsLocX < 100 && touchLoc.y - self.traitorsLocY < 100) {\r\n                    console.log(\"找到叛徒!!!\")\r\n                }\r\n            }\r\n        }, self.node);\r\n    },\r\n});\r\n"]}